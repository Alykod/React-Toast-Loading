{"version":3,"file":"index.js","sources":["../src/GlobalHelper.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect, useCallback, CSSProperties } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport './GlobalHelper.css'\r\n\r\n\r\nexport type ContextValue  = {\r\n    /** Returns Id if you want to remove toast without pressing or waiting on time out */\r\n    addToast: (content: ToastMessage) => number;\r\n    removeToast: (id: number) => void;\r\n    addOverLay: () => void;\r\n    removeOverLay: () => void;\r\n    removeAllToasts: () => void;\r\n    removeAllHelpers: () => void;\r\n}\r\n\r\nexport type ToastMessage =  {\r\n    title?: string,\r\n    body?: string\r\n}\r\nexport type ToastState = {\r\n    toastId: number\r\n    message?: {\r\n        title?: string,\r\n        body?: string\r\n    }\r\n}\r\nexport type ToastInterface = {\r\n    toasts: ToastState[];\r\n}\r\n\r\nexport type OverLayProps = {\r\n    /** Color of overlay background */\r\n    overLayColor?: string;\r\n    /** If you have a specific component in mind for the center such as a spinner or loadingbar */\r\n    overLayComponent?: any;\r\n    /** Overlay style */\r\n    overLayStyle?: object;\r\n}\r\n\r\nexport interface OverLayContainer extends OverLayProps {\r\n    overLay: boolean\r\n}\r\n\r\nexport interface ToastProps {\r\n    /** If you want to add a unique toast element such as bootstrap or custom component. Must Contain a title and a body or no message will show unless you have a default in the component */\r\n    defaultToast?: React.FC;\r\n    /** if you want to modify the default toast style, use this */\r\n    toastStyle?: object;\r\n    /** Timeout timer for the toasts */\r\n    toastTimeOut?: number;\r\n    /** Locations of the toast on the screen */\r\n    toastLocation?: \"top-right\" | \"top-left\" | \"bottom-right\" | \"bottom-left\" | \"center-right\" | \"center-left\";\r\n}\r\n\r\nexport interface GlobalHelperProvider extends OverLayProps, ToastProps {\r\n    /** React Children */\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport interface ToastContainerProps extends ToastInterface, ToastProps {}\r\n\r\nexport const GlobalHelperContext = React.createContext<Partial<ContextValue>>({});\r\n\r\n\r\nlet id = 0;\r\n\r\nexport const GlobalHelperProvider = (props: GlobalHelperProvider) => {\r\n    const [toasts, setToasts] = useState<ToastState[]>([]);\r\n    const [overLay, setOverLay] = useState(false);\r\n    const [idleToasts, setIdleToasts] = useState<ToastState[]>([]);\r\n\r\n    const addToast = useCallback((message: any) => {\r\n        if (overLay) {\r\n            setIdleToasts(idleToasts => [...idleToasts, { \"toastId\": id++, message: message }])\r\n            return id\r\n        }\r\n        else {\r\n            setToasts(toasts => [...toasts, { \"toastId\": id++, message: message }]);\r\n            return id;\r\n        }\r\n    }, [overLay]);\r\n\r\n\r\n    const removeToast = useCallback((id: number) => {\r\n        setToasts(toasts => toasts.filter(t => t.toastId !== id))\r\n    }, []);\r\n\r\n    const addOverLay = useCallback(() => {\r\n        setOverLay(true);\r\n        setToasts([]);\r\n    }, []);\r\n\r\n    const removeOverLay = useCallback(() => {\r\n        setOverLay(false);\r\n        setToasts(idleToasts || []);\r\n    }, [idleToasts]);\r\n\r\n    const removeAllToasts = useCallback(() => {\r\n        setToasts([]);\r\n    }, [])\r\n\r\n\r\n\r\n    const removeAllHelpers = useCallback(() => {\r\n        setToasts([]);\r\n        setOverLay(false);\r\n    }, [])\r\n\r\n    return (\r\n        <GlobalHelperContext.Provider value={{ removeToast, addOverLay, addToast, removeOverLay, removeAllHelpers, removeAllToasts }}>\r\n            <OverLayContainer overLay={overLay} overLayColor={props.overLayColor} overLayComponent={props.overLayComponent} />\r\n            <ToastContainer toasts={toasts} defaultToast={props.defaultToast} toastStyle={props.toastStyle} toastTimeOut={props.toastTimeOut} toastLocation={props.toastLocation} />\r\n            {props.children}\r\n        </GlobalHelperContext.Provider>\r\n    )\r\n\r\n}\r\n\r\nconst Toaster = (props: any) => {\r\n    const { removeToast } = useGlobalHelper();\r\n\r\n    useEffect(() => {\r\n        const timeout = setTimeout(() => {\r\n            removeToast(props.toast.toastId);\r\n        }, props.Timeout || 6000)\r\n\r\n        return () => {\r\n            clearTimeout(timeout)\r\n        }\r\n    }, [props, removeToast]);\r\n\r\n    return props.defaultToast ? <props.defaultToast message={props.toast.message} toastId={props.toast.toastId} dismiss={() => removeToast(props.toast.toastId)} /> :\r\n        <div style={props.toastStyle} className=\"toast-style\" onClick={() => removeToast(props.toast.toastId)}>\r\n            <div className=\"toast-title\">\r\n                <label className=\"toast-title-text\">{props.toast.message.title || \"Error\"}</label>\r\n            </div>\r\n            <div className=\"toast-body\">\r\n                <label className=\"toast-body-text\">{props.toast.message.body || \"\"}</label>\r\n            </div>\r\n        </div>\r\n\r\n}\r\n\r\nexport const useGlobalHelper = () => {\r\n    return useContext<any>(GlobalHelperContext);\r\n}\r\n\r\nconst ToastContainer = (props: ToastContainerProps) => {\r\n    return createPortal(\r\n        <div className={`container-style ${props.toastLocation || \"top-right\"}`}>\r\n            {props.toasts.map((eachToast: ToastState) => (\r\n                <Toaster key={eachToast.toastId} defaultToast={props.defaultToast} toastStyle={props.toastStyle} toastTimeOut={props.toastTimeOut} toast={eachToast} />\r\n            ))}\r\n        </div>, document.body\r\n    )\r\n}\r\n\r\nconst OverLaySelector = (props: OverLayProps) => {\r\n    const overLayStyle: CSSProperties = {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        position: 'absolute',\r\n        right: 0,\r\n        top: 0,\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        opacity: .6,\r\n        backgroundColor: props.overLayColor || 'black',\r\n        backdropFilter: \"blur(2px)\"\r\n    }\r\n    if (props.overLayComponent) {\r\n        return <props.overLayComponent />\r\n    } else {\r\n        return (\r\n            <div style={overLayStyle}>\r\n                <SpinnerSVG />\r\n            </div>)\r\n    }\r\n}\r\n\r\nconst OverLayPage = (props: any) => {\r\n    return props.overLay && OverLaySelector(props)\r\n\r\n}\r\n\r\nconst OverLayContainer = (props: OverLayContainer) => {\r\n    return createPortal(\r\n        <OverLayPage overLay={props.overLay} overLayComponent={props.overLayComponent} overLayColor={props.overLayColor} overLayStyle={props.overLayStyle} />\r\n        , document.body\r\n    )\r\n}\r\n\r\n\r\n\r\nconst SpinnerSVG = () => {\r\n    return (\r\n        <svg className=\"svgCircle\" width='200' height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <circle className=\"svgInnerCircle\" cx=\"100\" cy=\"100\" r=\"90\" />\r\n        </svg>\r\n    )\r\n}"],"names":["React","useCallback","useEffect","useContext","createPortal"],"mappings":"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"}